{"version":3,"sources":["activityHome/activityHome.js"],"names":["alaShareData","dataObj","appLogin","type","shareAppTitle","shareAppContent","shareAppImage","shareAppUrl","isSubmit","sharePage","JSON","stringify","dataStr","id","$","ajax","url","statistics","goodsId","data","console","success","log","addModel","goodsList","notifyUrl","html","i","length","toDecimal2","saleAmount","rebateAmount","con","amount","isFree","nperMap","freeAmount","nper","totalAmount","goodsUrl","goodsIcon","goodName","finished","page","window","onload","activityUrl","dataType","returnData","requestMsg","mainActivityList","goodTitle","sort","goodType","qualityGoodsList","attr","eq","find","append","msg","error","differStamp","second","day","diff","timer","intDiff","showTimerS","setInterval","hour","minute","Date","valueOf","Math","parseInt"],"mappings":"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","file":"../../activityHome/activityHome.js","sourcesContent":["/**\r\n * Created by yoe on 2017/5/27.\r\n**/\r\n\r\nlet finished = 0;\r\nlet page = 1; // 默认页数从1开始\r\n\r\n// app调用web的方法\r\nfunction alaShareData(){\r\n  // 分享内容\r\n  let dataObj = {\r\n    'appLogin': 'N', // 是否需要登录，Y需要，N不需要\r\n    'type': 'share', // 此页面的类型\r\n    'shareAppTitle': '年中盛宴，错过这次等一年',  // 分享的title\r\n    'shareAppContent': '分期免息“购”优惠，嗨购全球高佣好货，你要的攻略在这里！',  // 分享的内容\r\n    'shareAppImage': 'https://fs.51fanbei.com/h5/common/icon/midyearCorner.png',  // 分享右边小图\r\n    'shareAppUrl': 'https://app.51fanbei.com/fanbei-web/activity/feastRaidersShare',  // 分享后的链接\r\n    'isSubmit': 'N', // 是否需要向后台提交数据，Y需要，N不需要\r\n    'sharePage': 'feastRaidersShare' // 分享的页面\r\n  };\r\n\r\n  let dataStr = JSON.stringify(dataObj);  // json数组转换成json对象\r\n  return dataStr;\r\n}\r\nfunction statistics(id){\r\n  $.ajax({\r\n      url:'/fanbei-web/qualityGoodsStatistics',\r\n      type:'post',\r\n      data:{goodsId:id},\r\n      success:function (data) {\r\n          console.log(id);\r\n          console.log(data);\r\n      }\r\n  })\r\n}\r\n// 精品推荐Model\r\nfunction addModel(goodsList,notifyUrl) {\r\n\r\n  let html = '';\r\n  for (let i = 0; i < goodsList.length; i++) {\r\n    let saleAmount = toDecimal2(goodsList[i].saleAmount);  // 售价\r\n    let rebateAmount = toDecimal2(goodsList[i].rebateAmount);  // 返利\r\n    let goodsUrl = notifyUrl + '&params={\"goodsId\":\"'+goodsList[i].goodsId+'\"}';\r\n    let con=`<div class=\"price rebate\">\r\n                  <span>￥${saleAmount}</span>\r\n                  <span><i>返</i>￥${rebateAmount}</span>\r\n              </div>`;\r\n    if(goodsList[i].goodsType==1){\r\n        let amount = toDecimal2(goodsList[i].nperMap.amount);  // 每期金额\r\n        if(goodsList[i].nperMap.isFree==1){\r\n            let amount = toDecimal2(goodsList[i].nperMap.freeAmount);  // 每期金额\r\n        }\r\n        let totalAmount = toDecimal2(goodsList[i].nperMap.totalAmount);  // 抢购价\r\n        con=`<div class=\"price stages\">\r\n                 <p style=\"color:#f98011\"><i class=\"monthCorner\"></i>￥${amount}×${goodsList[i].nperMap.nper}</p>\r\n                 <p>抢购价：￥${totalAmount}</p>\r\n               </div>`\r\n    }\r\n\r\n    html +='<li class=\"clearfix\">'\r\n            +'<a onclick=\"statistics('+goodsList[i].goodsId+')\" href='+goodsUrl+'>'\r\n              +'<img src='+goodsList[i].goodsIcon+'>'\r\n              +'<div class=\"boutiqueHomeContent clearfix\">'\r\n                  +'<p class=\"title\" style=\"-webkit-box-orient: vertical;\">'+goodsList[i].goodName+'</p>'\r\n                  +con\r\n                  +'<button>马上抢</button>'\r\n              +'</div>'\r\n            +'</a>'\r\n          +'</li>';\r\n    }\r\n    return html;\r\n}\r\n\r\n// 初始化页面\r\nwindow.onload=function(){\r\n  $.ajax({\r\n    url: \"/activityHome/info\",\r\n    type: \"post\",\r\n    dataType: \"JSON\",\r\n    success: function(returnData){\r\n      if (returnData.success) {\r\n        console.log(returnData);\r\n        let notifyUrl = returnData.data.notifyUrl;  // goodsId\r\n\r\n        // 会场链接\r\n        let mainActivityList = returnData.data[\"mainActivityList\"];\r\n        for (var i = 0; i < mainActivityList.length; i++) {\r\n          let activityUrl = mainActivityList[i].activityUrl;\r\n          let sort = mainActivityList[i].sort;\r\n          let goodType = mainActivityList[i].goodType;\r\n\r\n          let dataType = $(\"#selectedHome li\").attr(\"data-type\");\r\n          if (dataType = sort) {\r\n            $(\"#selectedHome li\").eq(i).find('a').attr(\"href\",activityUrl);\r\n          } else {\r\n            requestMsg(\"会场不存在\");\r\n          }\r\n        }\r\n\r\n        // 精品title\r\n        let goodTitle = returnData.data[\"goodTitle\"];\r\n        $(\"#goodTitle\").append(goodTitle);\r\n\r\n        // 精品列表\r\n        let qualityGoodsList = returnData.data[\"qualityGoodsList\"];\r\n        $(\"#qualityGoodsList\").append(addModel(qualityGoodsList,notifyUrl));\r\n\r\n        finished=0\r\n\r\n      }else{\r\n        requestMsg(returnData.msg);\r\n      }\r\n    },\r\n    error: function(){\r\n      requestMsg(\"请求失败\");\r\n    }\r\n  });\r\n}\r\n\r\n// 倒计时\r\n$(function(){\r\n  // 结束时间的时间戳\r\n  let endDate = new Date(\"June 30,2017 23:59:59\");\r\n  let endStamp = endDate.valueOf();\r\n  // 获取当前时间的时间戳\r\n  let now = new Date();\r\n  let nowTimeStamp = now.valueOf();\r\n  // 相差的时间戳\r\n  let differStamp = endStamp - nowTimeStamp;\r\n  let intDiff = parseInt(differStamp/1000);//倒计时总秒数量\r\n\r\n  function showTimerS( diff ){\r\n    var day=0,\r\n    hour=0,\r\n    minute=0,\r\n    second=0;//时间默认值\r\n\r\n    if(diff > 0){\r\n      day = Math.floor(diff / (60 * 60 * 24));\r\n      hour = Math.floor(diff / (60 * 60)) - (day * 24);\r\n      minute = Math.floor(diff / 60) - (day * 24 * 60) - (hour * 60);\r\n      second = Math.floor(diff) - (day * 24 * 60 * 60) - (hour * 60 * 60) - (minute * 60);\r\n    }\r\n\r\n    if (minute <= 9) minute = '0' + minute;\r\n    if (second <= 9) second = '0' + second;\r\n    $('#day_show').html(day+\"天\");\r\n    $('#hour_show').html('<s id=\"h\"></s>'+hour+'时');\r\n    $('#minute_show').html('<s></s>'+minute+'分');\r\n    $('#second_show').html('<s></s>'+second+'秒');\r\n  };\r\n\r\n  function timer(intDiff){\r\n      showTimerS(intDiff);\r\n      intDiff--;\r\n      window.setInterval(function(){\r\n          showTimerS(intDiff);\r\n          intDiff--;\r\n      }, 1000);\r\n  };\r\n  timer(intDiff);\r\n});\r\n"]}